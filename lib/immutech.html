<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramy PRO | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body { background: #070b14; color: white; font-family: 'Tajawal', sans-serif; margin: 0; padding: 0; overflow-x: hidden; }
        
        #securityOverlay {
            position: fixed;
            inset: 0;
            z-index: 999;
            background: rgba(7, 11, 20, 0.85);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        #contentWrapper {
            opacity: 0.1;
            filter: blur(10px);
            pointer-events: none;
            transition: all 1s ease;
        }

        .glass-card { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); transition: 0.3s; }
        .glass-card:hover { border-color: rgba(37, 211, 102, 0.3); }
        .switch { position: relative; display: inline-block; width: 44px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #334155; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #25d366; }
        input:checked + .slider:before { transform: translateX(22px); }
        .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; }
        .online { background-color: #25d366; box-shadow: 0 0 10px #25d366; }
        .offline { background-color: #ef4444; box-shadow: 0 0 10px #ef4444; }
    </style>
</head>
<body class="p-4 md:p-8 bg-fixed" style="background-image: radial-gradient(circle at top right, #1e293b, #070b14);">

    <div id="securityOverlay">
        <div class="max-w-md w-full p-8 glass-card rounded-[2.5rem] shadow-2xl border-green-500/20 text-center">
            <div class="mb-6">
                <div class="inline-block p-4 bg-green-500/10 rounded-full mb-4">
                    <i class="fas fa-shield-halved text-4xl text-green-500"></i>
                </div>
                <h2 class="text-2xl font-bold">Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</h2>
                <p class="text-gray-400 text-sm mt-2">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙˆØµÙ„Ùƒ ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</p>
            </div>
            
            <div class="space-y-4">
                <input type="text" id="phoneIn" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·" 
                    class="w-full p-4 bg-black/40 border border-white/10 rounded-2xl focus:border-green-500 outline-none text-center font-bold">
                
                <input type="text" id="codeIn" placeholder="Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ (Access Key)" 
                    class="w-full p-4 bg-black/40 border border-white/10 rounded-2xl focus:border-green-500 outline-none text-center font-mono uppercase tracking-widest">
                
                <button onclick="verifyAccess()" class="w-full py-4 bg-green-600 hover:bg-green-700 rounded-2xl font-bold transition-all shadow-lg shadow-green-500/20">
                    Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø¹Ø¯Ø§Ø¯Ø§Øª <i class="fas fa-unlock-alt ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="contentWrapper" class="max-w-xl mx-auto space-y-6">
        
        <div class="glass-card p-5 rounded-[2rem] flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="relative">
                    <img src="https://ui-avatars.com/api/?name=Ramy+Pro&background=25d366&color=fff" class="w-12 h-12 rounded-2xl shadow-lg">
                    <span id="statusIndicator" class="status-dot online absolute -bottom-1 -right-1 border-2 border-[#070b14]"></span>
                </div>
                <div>
                    <h1 class="text-xl font-bold">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… <span class="text-green-500 font-mono">RAMY PRO</span></h1>
                    <p id="statusText" class="text-xs text-green-400 font-medium">Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¢Ù†</p>
                </div>
            </div>
            <button onclick="window.location.reload()" class="p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all text-gray-400">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>

        <div class="grid grid-cols-1 gap-4">
            <div class="glass-card p-5 rounded-3xl flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="p-3 bg-blue-500/10 rounded-2xl text-blue-400"><i class="fas fa-eye text-xl"></i></div>
                    <div>
                        <h3 class="font-bold text-sm">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª</h3>
                        <p class="text-[10px] text-gray-500">Ù…Ø´Ø§Ù‡Ø¯Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙÙˆØ± Ø§Ù„Ù†Ø´Ø±</p>
                    </div>
                </div>
                <label class="switch">
                    <input type="checkbox" checked id="autoSeen" onchange="toggleFeature('AUTO_SEEN', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="glass-card p-5 rounded-3xl flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="p-3 bg-pink-500/10 rounded-2xl text-pink-400"><i class="fas fa-heart text-xl"></i></div>
                    <div>
                        <h3 class="font-bold text-sm">ØªÙØ§Ø¹Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</h3>
                        <p class="text-[10px] text-gray-500">Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§Ø¹Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø­Ø§Ù„Ø§Øª</p>
                    </div>
                </div>
                <label class="switch">
                    <input type="checkbox" checked id="autoReact" onchange="toggleFeature('AUTO_REACT', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="glass-card p-5 rounded-3xl flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-red-500/10 rounded-xl text-red-400"><i class="fas fa-phone-slash"></i></div>
                    <h3 class="font-bold text-xs">Ø±ÙØ¶ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª</h3>
                </div>
                <label class="switch">
                    <input type="checkbox" id="antiCall" onchange="toggleFeature('ANTI_CALL', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="glass-card p-5 rounded-3xl flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-yellow-500/10 rounded-xl text-yellow-400"><i class="fas fa-clock"></i></div>
                    <h3 class="font-bold text-xs">Ù…ØªØµÙ„ 24 Ø³Ø§Ø¹Ø©</h3>
                </div>
                <label class="switch">
                    <input type="checkbox" id="alwaysOnline" onchange="toggleFeature('ALWAYS_ONLINE', this.checked)">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="glass-card p-6 rounded-[2rem]">
            <h3 class="font-bold mb-4 text-sm flex items-center gap-2">
                <i class="fas fa-smile text-yellow-400"></i>
                Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø®ØµØµ
            </h3>
            <div class="relative">
                <input type="text" id="emojiInput" 
                    placeholder="Ø¶Ø¹ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù‡Ù†Ø§ (Ù…Ø«Ù„Ø§Ù‹ ğŸ”¥)" 
                    class="w-full p-4 bg-black/40 border border-white/10 rounded-2xl focus:border-green-500 outline-none transition-all text-center text-2xl">
                <button onclick="saveEmoji()" class="mt-4 w-full py-3 bg-green-600 hover:bg-green-700 rounded-xl font-bold transition-all flex items-center justify-center gap-2">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
                </button>
            </div>
            <div class="mt-4 text-center text-[10px] text-gray-500 italic">
                ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø·ÙˆØ± Ø±Ø§Ù…ÙŠ Ø§Ù„Ø­Ø·Ø§Ù…ÙŠ
            </div>
        </div>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
        async function verifyAccess() {
            const phone = document.getElementById('phoneIn').value;
            const code = document.getElementById('codeIn').value;

            if(!phone || !code) {
                return Swal.fire({ icon: 'error', title: 'Ø¹Ø°Ø±Ø§Ù‹', text: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', background: '#070b14', color: '#fff' });
            }

            Swal.fire({
                title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©...',
                allowOutsideClick: false,
                didOpen: () => { Swal.showLoading(); },
                background: '#070b14',
                color: '#fff'
            });

            try {
                const response = await fetch('/api/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone: phone.trim(), code: code.trim().toUpperCase() })
                });

                const result = await response.json();

                if (result.success) {
                    Swal.fire({ 
                        icon: 'success', 
                        title: 'ØªÙ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚', 
                        text: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', 
                        background: '#070b14', 
                        color: '#fff', 
                        timer: 1500,
                        showConfirmButton: false 
                    }).then(() => {
                        document.getElementById('securityOverlay').style.opacity = '0';
                        setTimeout(() => { document.getElementById('securityOverlay').style.display = 'none'; }, 800);
                        
                        const wrapper = document.getElementById('contentWrapper');
                        wrapper.style.opacity = '1';
                        wrapper.style.filter = 'none';
                        wrapper.style.pointerEvents = 'auto';
                    });
                } else {
                    Swal.fire({ icon: 'error', title: 'ÙØ´Ù„ Ø§Ù„ØªÙˆØ«ÙŠÙ‚', text: 'Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­', background: '#070b14', color: '#fff' });
                }
            } catch (error) {
                Swal.fire({ icon: 'error', title: 'Ø®Ø·Ø£', text: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', background: '#070b14', color: '#fff' });
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¨Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        async function toggleFeature(feature, status) {
            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ feature, status })
                });
                const res = await response.json();
                if(res.success) {
                    const Toast = Swal.mixin({
                        toast: true,
                        position: 'top-end',
                        showConfirmButton: false,
                        timer: 2000,
                        timerProgressBar: true,
                        background: '#0f172a',
                        color: '#fff'
                    });
                    Toast.fire({
                        icon: 'success',
                        title: `ØªÙ… ${status ? 'ØªÙØ¹ÙŠÙ„' : 'ØªØ¹Ø·ÙŠÙ„'} Ø§Ù„Ù…ÙŠØ²Ø© Ø¨Ù†Ø¬Ø§Ø­`
                    });
                }
            } catch (e) {
                console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª");
            }
        }

        // Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        async function saveEmoji() {
            const emoji = document.getElementById('emojiInput').value;
            if(!emoji) return Swal.fire({ icon: 'warning', title: 'ØªÙ†Ø¨ÙŠÙ‡', text: 'Ø£Ø¯Ø®Ù„ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø£ÙˆÙ„Ø§Ù‹', background: '#070b14', color: '#fff' });

            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ emoji })
                });
                const res = await response.json();
                if(res.success) {
                    Swal.fire({ icon: 'success', title: 'ØªÙ… Ø§Ù„Ø­ÙØ¸', text: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¨Ù†Ø¬Ø§Ø­ âœ…', background: '#070b14', color: '#fff' });
                }
            } catch (e) {
                Swal.fire({ icon: 'error', title: 'Ø®Ø·Ø£', text: 'ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ', background: '#070b14', color: '#fff' });
            }
        }
    </script>
</body>
</html>
